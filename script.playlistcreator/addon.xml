<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<addon id="script.playlistcreator"
       name="Playlist [COLOR gold]C[/COLOR]reator"
       version="1.7.2xl"
       provider-name="Tha [COLOR gold]G[/COLOR] Thang">

    <requires>
        <import addon="xbmc.python" version="3.0.0"/>
    </requires>

    <extension point="xbmc.python.script" library="default.py">
        <provides>video</provides>
    </extension>
    
    <extension point="xbmc.service" library="service.py" start="startup"/>

    <extension point="kodi.context.item">
        <context-item>
            <label>Toevoegen aan favorieten</label>
            <action>RunScript(script.playlistcreator, action=add_favorite, path=$INFO[ListItem.Path])</action>
            <visible>System.HasAddon(script.playlistcreator)</visible>
        </context-item>

        <context-item>
            <label>Verwijderen uit favorieten</label>
            <action>RunScript(script.playlistcreator, action=remove_favorite, path=$INFO[ListItem.Path])</action>
            <visible>System.HasAddon(script.playlistcreator)</visible>
        </context-item>

        <context-item>
            <label>Maak favorieten-afspeellijst</label>
            <action>RunScript(script.playlistcreator, action=create_favorites)</action>
            <visible>System.HasAddon(script.playlistcreator)</visible>
        </context-item>

        <context-item>
            <label>Sla Afspelende Stream op (in Stream Set)</label>
            <action>RunScript(script.playlistcreator, action=save_playing_stream)</action>
            <visible>System.HasAddon(script.playlistcreator) + Player.Playing</visible>
        </context-item>

        <context-item>
            <label>Beheer Stream Sets</label>
            <action>RunScript(script.playlistcreator, action=manage_stream_sets)</action>
            <visible>System.HasAddon(script.playlistcreator)</visible>
        </context-item>

        <context-item>
            <label>Download Nu Afspelende [COLOR darkblue]Video[/COLOR]</label>
            <action>RunScript(script.playlistcreator, action=download_file, download_type=standard, path=$INFO[ListItem.Path])</action>
            <visible>System.HasAddon(script.playlistcreator) + String.EndsWith(ListItem.Path,.mp4|.mkv|.avi|.mov|.wmv|.webm|.flv|.mpg|.mpeg)</visible>
        </context-item>

        <context-item>
            <label>Download Nu Afspelende [COLOR darkblue]X[/COLOR]</label>
            <action>RunScript(script.playlistcreator, action=download_file, download_type=adult, path=$INFO[ListItem.Path])</action>
            <visible>System.HasAddon(script.playlistcreator) + String.EndsWith(ListItem.Path,.mp4|.mkv|.avi|.mov|.wmv|.webm|.flv|.mpg|.mpeg)</visible>
        </context-item>
    </extension>

    <extension point="xbmc.addon.metadata">
        <summary lang="en">Lightweight Playlist Generator</summary>
        <description lang="en">
            Generates Video Playlists.
            Specialized for 'Hard to Scrape' video collections.
        </description>
        <platform>all</platform>
        <assets>
            <icon>resources/icon.png</icon>
            <fanart>resources/fanart.jpg</fanart>
        </assets>
        <news>
            <item>[B]Versie 1.7.2xl (2025-06-13):[/B] Uitgebreide sorteeropties voor afspeellijsten (mappen, bestanden, nieuwste bovenaan). Weergaveopties voor foldernamen. 'Toelichting &amp; Help' in hoofdmenu. Verbeterde code en optimalisaties.</item>
            <item>[B]Versie 1.7.0 (2025-06-12):[/B] Smart Folder, Favorieten beheer, Stream Set Manager, Verbeterde Download Manager, Geplande updates via service. Algemene code-opschoning.</item>
        </news>
    </extension>
</addon>